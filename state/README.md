# State Impact Reports

View reports via the links to the left. We have a [new chord chart page](chord).

<!--
Contributors: Sunny (toggle for scietific notation), Laksh (TS build debugging, Sector Profile)
Expansion of following in email Aug 22, 2024

2019 data - Wes and Ben say to just host 2019 here
<a href="https://github.com/ModelEarth/USEEIO/tree/import_factors/import_factors_exio/output">Exiobase+BEA output for 2019</a>.
-->

TO DO: Some of the links to the left currently only send json to the console.log. Update to also display output in those pages. <a href="commodities.html">See&nbsp;how to wait for DOM</a>. (Use your browser's inspector to view console.log output.)

TO DO: Update pages to watch for hash value changes using hashChangedUseeio().<br> Example of changing #state= in <a href="calculation.html#state=NY">calculation.html#state=NY</a>  
Add the state dropdown to more pages.

<a href="https://model.earth/io/charts">The React IO charts</a> use the <a href="../dist/useeio.min.js">dist/useeio.min.js file</a> generated by <a href="../">running the useeio.js build</a>  
State model json files reside in <a href="https://github.com/ModelEarth/useeio-json/tree/main/models/2020">2020 EPA State Model Data</a> 

<!--
We also have a slower python pre-processed report at <a href="/data-pipeline/research/economy/">Python Commodities Report</a>.
-->
 
<a href="/io/about/">USEEIO State Models</a> - Includes work on SQL tables for Microsoft Power BI and Tableau

<a href="https://colab.research.google.com/drive/1CYKNTnLiZ_PbP5WS_dMVtYyYDIAFwzq8?usp=sharing" target="useeio_colab">Generate Supabase USEEIO (CoLab)</a> - Upcoming python to migrate for SQL tables

<a href="/profile/trade/">Exiobase International Trade Flow SQL</a> - Parallel work on international trade reports


## US EPA State Data

[View Feb 2024 State Models Report](https://cfpub.epa.gov/si/si_public_record_Report.cfm?dirEntryId=360453&Lab=CESER) regarding new data files for v1.0 of the USEEIO State Models. 

The report includes [Excel versions of 2020 models](http://doi.org/10.23719/1530076) for all states.
 
The 2020 state data resides in [ModelEarth/useeio-json on GitHub](https://github.com/ModelEarth/useeio-json/tree/main/models). Generated by running [dumpjson](../) 

TO DO: Create interactive version of the supporting figures [including maps of the U.S.](https://doi.org/10.6084/m9.figshare.c.7041473) showing environmental pressure intensity grouped by indicator and commodity for all states and rankings of sectors by consumption by environmental pressure for 2020.

<!--
The JSON API that drives our [industry comparisons](/localsite/info/) uses EPA data prepared and presented using useeior (R Language),  [useeio.js](/trade/footprint) and the [useeio-widgets](/io/charts/) (Javascript and HTML using the USEEIO-API).
-->

### State Models Report

[ERG Adds New Data to National GHG Emissions Accounting Data Set](https://www.erg.com/news/erg-adds-new-data-national-ghg-emissions-accounting-data-set)

[The 2024 State Models Report map JPEG images](https://doi.org/10.6084/m9.figshare.c.7041473) document the following factors for indicating environmental pressure intensity.

All the maps of per dollar produced in a year by a state are derived using the N matrix values from the respective state model for the state commodity and state location and (e.g. 23/US-GA).  Other figures might be derived from calculations with model matrices.

**The N matrix** containing **direct and indirect impact coefficients** for different commodities for duplicating the report. These coefficients capture environmental pressure activities like emission and resource use associated with both direct and indirect activities. N matrix gives us the direct and indirect impact coeff for all 411 sectors, whose API we can use to rank environmental pressure intensity per state. As N matrix uses equivalency/$ as its value unit, it will be useful for calculation of total environmental impact attributed to each sector. 

**Make Matrix (V)** -  contains the total production or output of commodities by industry (sector) in each state (useful for associating production activities with environmental pressures).  

**Use Matrix (U)** -  shows how much of each commodity is consumed by different sectors. Useful as it links consumption patterns to environmental indicators.  

**The U\_d (domestic use) matrix** is a subset of the Use matrix (U). It outlines domestic consumption patterns which could be key for calculating within-state environmental pressures from production/consumption.  

**L (total requirements matrix)** to model direct and indirect environmental impacts.  

**"flows" matrix**, to link economic activities to environmental pressures.  

**"final\_demand\_meta" matrix** to indicate consumption-based environmental pressure.  

**A (Direct Requirements)** for calculating direct environmental pressure intensities.  

The US EPA provides [USEEIO-State R code](https://github.com/usepa/USEEIO-State) related to these figures to help make the calculation procedures consistent.

Send specific questions to USEEIO@epa.gov
<br>


## Build for new State Models

On Sept 15, 2024 - Laksh and Anubhav fixed the [tslib error](https://github.com/USEPA/useeio.js/issues/2) in the npm build which resulted in a new dist/useeio.js and dist/useeio.min.js files.

We're not sure if the fix will now get the new state models working.

If the useeio_widgets.js file doesn't change we'll need to figure out what needs to be done for the new 50 state model structure.


1. Fork the useeio-widgets repo (Have Loren sync with the parent USEPA repo.)
https://github.com/modelearth/useeio-widgets

2. Change line 37 in package.json to use modelearth rather than USEPA
https://github.com/ModelEarth/useeio-widgets/blob/master/package.json  
"useeio": "github:modelearth/useeio.js"

3. Before and after [building useeio-widgets](https://model.earth/io/charts/react/), point [iochart.html](http://localhost:8887/useeio-widgets/build/iochart.html#indicators=ENRG,GHG,VADD) at the new state models in useeio-json and add at line 27:

		// To test state data - Use GA, ME, MN, OR, WA for ones in API folder.
		modelID = "GAEEIOv1.0";
REACT WIDGET ISSUE: You will then see $0 in the center column.

5. Make a local copy of "useeio-widgets/build/lib/useeio\_widgets.js" in the "io" repo and replace "io/build/useeio\_widgets.js". You can see what changes using the diff in Github Desktop.  

6. Now [run the useeio_widgets build steps](https://model.earth/io/charts/react/).
<br>BUILD ISSUE:  
The size of useeio-widgets.js increases from 3.12 MB and 3.3 MB to 13.6 MB


7. If the output is small again, we'll place the resulting [useeio_widgets.js file in io/build/lib](https://github.com/ModelEarth/io/tree/main/build/lib)  

Here's a page to test with locally to see if values appear in the middle column. This page already points at the new state models and the middle column values are 0 as a result:
[http://localhost:8887/io/build/iochart.html#indicators=ENRG,GHG,VADD](http://localhost:8887/io/build/iochart.html#indicators=ENRG,GHG,VADD)
[https://model.earth/io/build/iochart.html#indicators=ENRG,GHG,VADD](https://model.earth/io/build/iochart.html#indicators=ENRG,GHG,VADD)

Info on the USEEIO widget charts: [model.earth/io/charts](https://model.earth/io/charts/).
<br>


---

[Participate through DemocracyLab](https://www.democracylab.org/projects/834) - [Contact our Team](/io/team/) - [International Trade Flow](/profile/trade/)

